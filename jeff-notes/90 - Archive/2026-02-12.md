# 2026-02-12

[[2026-02-13]]

### Coupling and Cohesion

- Coupling "The strength of relationships between code modules"
    - how easy is it to change one thing without needing to change (or break) something else? 
    - "Inappropriate Intimacy"
    - We want low coupling.
- Cohesion - "How well things go together"
    - "Junk Pile" - "Incidental Cohesion" - A "Utils" or "Helpers" 
    - "Temporal" - have the stuff close at hand to where it is needed and when it is needed.
    - "Functional" - 
    - "Is it the right thingy? Abstraction"

Writing code using the four rules of simple design.

- This section seems to be about testing, and it is. It seems to be about learning some C#, and it is. But it also contains the secrets to life, death, the universe, and well, everything! STAY FROSTY!
- After we do this, we'll be in a much better place to understand the code we've written in the API, how we can move it forward, add tests, and move on to other programming languages and platforms (like Angular!)















### Daily Quiz

1. When do we use the async/await pattern (that your instructor hasn't even explained yet) in our C# code?
2. What is Open API? 
    - What is Scalar? (The thing we added to AppHost)
3. Why did we use an Http DELETE method in our `student/moments` endpoint when we really didn't "delete" anything?
4. Consider the following code we created yesterday:

```csharp
 public static async Task<IResult> MarkQuestionAnswered(Guid id, IDocumentSession session)
    {
        // ...
    }
```

- How is our API being made "aware" that this is the code it should run when receiving an Http DELETE request to `student/moments/b0f17531-ca09-41dd-8654-d0eb180f6797` (for example)?
- Where are the `id` and `session` variables coming from when this method is executed?
- If the API received a request of `DELETE /student/moments/bird-cage` what would the value of `id` be when this code is executed (uhm, might be a trick question), but explain your answer.
- The database provider we are using here calls it a "session", sometimes it's called a "context", and ASP.NET MVC (our platform for building APIs) calls it a "scope". But they all mean basically the same thing in this context, which is:


## Answers


1. When do we use the async/await pattern (that your instructor hasn't even explained yet) in our C# code?
    - To perform non-blocking operations, Whenever you make an endpoint that reaches out to another resource(service,database, etc)
        - 
    - Async on function header, await on resource call. Async methods always return a `Type` of something, it is a wrapper.
        - Sometimes you see a `ValueTask`
1.1 - What is "reflection" in a programming language? The ability of code to look at itself. A kind of "introspection".

    - 
2. What is Open API?
    - Standard language format for DOCUMENTING RESTful APIs in JSON (and YAML)
        - Swashbuckle - a tool that can look at your code and generate the "starter" openapi spec (swagger document)
        - We'll include this, and we'll a endpoint that will let you see documentation using SwaggerUi during development.
    - NSwag - Same kind of deal. 
    - OpenApi - IT IS AWESOME NOW I WAS TOTALLY WRONG. .NET 10 this is fantastic.
    - What is Scalar? (The thing we added to AppHost)
        - Wrapper for Open API (updated version of swagger) that makes the json look nice and provides endpoint testing
        - just a tool that can take an OpenApi document and present a UI so you can test out and explore the API.
            - do you use this at Your Company? I dunno. Does that matter? No - I added it to the apphost, so *I* can use it and the developers
            on my team can use it, what will go into "production" so to speak, is just the openapi document.
3. Why did we use an Http DELETE method in our `student/moments` endpoint when we really didn't "delete" anything?
    - One of the four HTTP request types and DELETE fit the best
    - Mark MM that have been answered, removing it from the returned table, modifying it
4. Consider the following code we created yesterday:

```csharp
 public static async Task<IResult> MarkQuestionAnswered(Guid id, IDocumentSession session)
    {
        // ...
    }
```

- How is our API being made "aware" that this is the code it should run when receiving an Http DELETE request to `student/moments/b0f17531-ca09-41dd-8654-d0eb180f6797` (for example)?
    - Controllers: Using annotations
    - Not Controllers: Using MapDelete in ApiExtensions - 100% credit. still has to be called from Program.cs
- Where are the `id` and `session` variables coming from when this method is executed?
    - The API Framework - the runtime - will call this code AND provide the things we ask for that are parameters to this.
    - 
- If the API received a request of `DELETE /student/moments/bird-cage` what would the value of `id` be when this code is executed (uhm, might be a trick question), but explain your answer.
    - ID gets defaulted to 0000... if we didn't add the route constraint on the route (e.g. `{id:guid}`)
    - It produces a 404 error, because it can't run (can't cast to GUID)
- The database provider we are using here calls it a "session", sometimes it's called a "context", and ASP.NET MVC (our platform for building APIs) calls it
    a "scope". But they all mean basically the same thing in this context, which is:
    - Transaction, Lifespan of a request, it either does all the things or none of them.

